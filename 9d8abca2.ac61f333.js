(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{117:function(e,n,t){"use strict";t.d(n,"a",(function(){return p})),t.d(n,"b",(function(){return d}));var a=t(0),r=t.n(a);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var u=r.a.createContext({}),s=function(e){var n=r.a.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):c(c({},n),e)),t},p=function(e){var n=s(e.components);return r.a.createElement(u.Provider,{value:n},e.children)},b={inlineCode:"code",wrapper:function(e){var n=e.children;return r.a.createElement(r.a.Fragment,{},n)}},m=r.a.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,o=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=s(t),m=a,d=p["".concat(o,".").concat(m)]||p[m]||b[m]||i;return t?r.a.createElement(d,c(c({ref:n},u),{},{components:t})):r.a.createElement(d,c({ref:n},u))}));function d(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,o=new Array(i);o[0]=m;var c={};for(var l in n)hasOwnProperty.call(n,l)&&(c[l]=n[l]);c.originalType=e,c.mdxType="string"==typeof e?e:a,o[1]=c;for(var u=2;u<i;u++)o[u]=t[u];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},91:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return o})),t.d(n,"metadata",(function(){return c})),t.d(n,"rightToc",(function(){return l})),t.d(n,"default",(function(){return s}));var a=t(2),r=t(6),i=(t(0),t(117)),o={title:"unique-constraint-name"},c={unversionedId:"rules/unique-constraint-name",id:"rules/unique-constraint-name",isDocsHomePage:!1,title:"unique-constraint-name",description:"Why?",source:"@site/docs/rules/unique-constraint-name.md",slug:"/rules/unique-constraint-name",permalink:"/liquibase-linter/docs/rules/unique-constraint-name",version:"current",sidebar:"docs",previous:{title:"table-name-length",permalink:"/liquibase-linter/docs/rules/table-name-length"},next:{title:"valid-context",permalink:"/liquibase-linter/docs/rules/valid-context"}},l=[{value:"Why?",id:"why",children:[]},{value:"Options",id:"options",children:[]},{value:"Example Usage",id:"example-usage",children:[]}],u={rightToc:l};function s(e){var n=e.components,t=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},u,t,{components:n,mdxType:"MDXLayout"}),Object(i.b)("h2",{id:"why"},"Why?"),Object(i.b)("p",null,"When ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"http://www.liquibase.org/documentation/changes/add_unique_constraint.html"}),"adding a unique constraint"),", it's possible to omit a specific ",Object(i.b)("inlineCode",{parentName:"p"},"constraintName")," for the constraint. This is hazardous, because the database vendor will automatically name it for you in an unpredictable way, which makes things difficult later if you want to reference or remove it."),Object(i.b)("p",null,"Also, you might already have a broad standard for object names - and be enforcing it with ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/liquibase-linter/docs/rules/object-name"}),"the object-name rule")," - but you might also want a more specific rule concerning how unique constraints are named."),Object(i.b)("p",null,"This rule will fail if there is no ",Object(i.b)("inlineCode",{parentName:"p"},"constraintName")," given when adding a unique constraint, or when configured with a pattern, will fail if the given name does not match the pattern."),Object(i.b)("h2",{id:"options"},"Options"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"pattern")," - (regex, as string) optional regular expression that the name of any added unique constraint must adhere to"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"dynamicValue")," - (string) Spring EL expression, with the ",Object(i.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/liquibase/liquibase/blob/main/liquibase-core/src/main/java/liquibase/change/core/AddUniqueConstraintChange.java"}),Object(i.b)("inlineCode",{parentName:"a"},"AddUniqueConstraintChange"))," instance as its expression scope, that should resolve to a string, and can then be interpolated in the pattern with ",Object(i.b)("inlineCode",{parentName:"li"},"{{value}}"))),Object(i.b)("h2",{id:"example-usage"},"Example Usage"),Object(i.b)("p",null,"To simply ensure that a name is always given:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n    "rules": {\n        "unique-constraint-name": true\n    }\n}\n')),Object(i.b)("p",null,"To ensure that a pattern is matched, including the table name:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n    "rules": {\n        "unique-constraint-name": {\n            "pattern": "^{{value}}_U\\\\d$",\n            "dynamicValue": "tableName",\n            "errorMessage": "Unique constraint names must be the table name, suffixed with \'U\' and a number, e.g. FOO_U2"\n        }\n    }\n}\n')))}s.isMDXComponent=!0}}]);